<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administrador - FitWeb</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="asset/css/style.css">
</head>
<body class="bg-dark text-light">

    <script>
        if (localStorage.getItem('adminLogueado') !== 'true') {
            alert('Acceso denegado. Debes ser administrador.');
            window.location.href = 'inicioSesion.html';
        }
    </script>

    <header class="navbar navbar-dark bg-black shadow-sm">
        <div class="container d-flex justify-content-between">
            <a class="navbar-brand fw-bold text-warning" href="#">Panel de Administrador</a>
            <div>
                <a class="btn btn-outline-light me-2" href="index.html" target="_blank">Ver Sitio Web</a>
                <a id="admin-logout-btn" class="btn btn-outline-warning" href="#">Cerrar Sesión</a>
            </div>
        </div>
    </header>

    <main class="container my-5">
        <h1 class="display-4 mb-4">Gestión del Sitio</h1>
        <ul class="nav nav-tabs mb-4">
            <li class="nav-item"><a class="nav-link active" id="tab-productos" href="#">Productos</a></li>
            <li class="nav-item"><a class="nav-link" id="tab-usuarios" href="#">Usuarios</a></li>
        </ul>

        <section id="section-productos">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h2>Listado de Productos</h2>
                <button id="btn-show-form-producto" class="btn btn-warning">Añadir Producto</button>
            </div>
            
            <form id="form-add-producto" class="card bg-black border-secondary p-4 mb-4 d-none needs-validation" novalidate>
                <h4 id="form-producto-titulo">Nuevo Producto</h4>
                <input type="hidden" id="producto-id">
                <div class="row">
                    <div class="col-md-8 mb-3">
                        <label for="producto-nombre" class="form-label">Nombre</label>
                        <input type="text" class="form-control bg-dark text-light" id="producto-nombre" required>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="producto-precio" class="form-label">Precio</label>
                        <input type="number" class="form-control bg-dark text-light" id="producto-precio" required>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="producto-descripcion" class="form-label">Descripción</label>
                    <textarea class="form-control bg-dark text-light" id="producto-descripcion" rows="3" required></textarea>
                </div>
                <div class="row">
                    <div class="col-md-8 mb-3">
                        <label for="producto-imagen" class="form-label">URL de la Imagen</label>
                        <input type="text" class="form-control bg-dark text-light" id="producto-imagen" placeholder="ej: asset/img/nuevo.jpg" required>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="producto-stock" class="form-label">Stock</label>
                        <input type="number" class="form-control bg-dark text-light" id="producto-stock" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-warning">Guardar Producto</button>
                <button type="button" id="btn-cancelar-edicion-producto" class="btn btn-secondary mt-2 d-none">Cancelar</button>
            </form>
            
            <div class="table-responsive">
                <table class="table table-dark table-striped">
                    <thead>
                        <tr>
                            <th>ID</th><th>Nombre</th><th>Precio</th><th>Stock</th><th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tabla-productos-body"></tbody>
                </table>
            </div>
        </section>

        <section id="section-usuarios" class="d-none">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h2>Listado de Usuarios</h2>
                <button id="btn-show-form-usuario" class="btn btn-warning">Añadir Usuario</button>
            </div>
            
            <form id="form-add-usuario" class="card bg-black border-secondary p-4 mb-4 d-none needs-validation" novalidate>
                <h4 id="form-usuario-titulo">Nuevo Usuario</h4>
                <input type="hidden" id="usuario-id">
                <div class="mb-3">
                    <label for="usuario-nombre" class="form-label">Nombre</label>
                    <input type="text" class="form-control bg-dark text-light" id="usuario-nombre" required>
                </div>
                <div class="mb-3">
                    <label for="usuario-rut" class="form-label">RUT</label>
                    <input type="text" class="form-control bg-dark text-light" id="usuario-rut" required>
                </div>
                 <div class="mb-3">
                    <label for="usuario-telefono" class="form-label">Teléfono</label>
                    <input type="tel" class="form-control bg-dark text-light" id="usuario-telefono" required>
                </div>
                <div class="mb-3">
                    <label for="usuario-email" class="form-label">Email</label>
                    <input type="email" class="form-control bg-dark text-light" id="usuario-email" required>
                </div>
                 <div class="mb-3">
                    <label for="usuario-password" class="form-label">Contraseña</label>
                    <input type="password" class="form-control bg-dark text-light" id="usuario-password" placeholder="Dejar en blanco para no cambiar">
                </div>
                <button type="submit" class="btn btn-warning">Guardar Usuario</button>
                <button type="button" id="btn-cancelar-edicion-usuario" class="btn btn-secondary mt-2 d-none">Cancelar</button>
            </form>
            
            <div class="table-responsive">
                <table class="table table-dark table-striped">
                    <thead>
                        <tr>
                            <th>ID</th><th>Nombre</th><th>RUT</th><th>Email</th><th>Teléfono</th><th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tabla-usuarios-body"></tbody>
                </table>
            </div>
        </section>
    </main>
  
    <script src="asset/java/admin.js"></script>
    <script>
        document.getElementById('admin-logout-btn').addEventListener('click', function(e) {
            e.preventDefault();
            if (confirm('¿Quieres cerrar tu sesión de administrador?')) {
                localStorage.removeItem('adminLogueado');
                window.location.href = 'index.html';
            }
        });
    </script>
</body>
</html>